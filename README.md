# SolarWeatherStation
Solar powered weather station with 4000mAh lithium battery backup, featuring automatic charging when not in use. Based on ESP32-WROOM-32 microcontroller using BME280 (Temperature, Humidity &amp; Pressure), S12SD (UV), Wind Speed and Direction sensors.

2 units, 1 external client, 1 internal server with storage. Both using ESP32s, which I have plenty of. External powered using a small solar panel & rechargeable battery. Take measurements every 30 minutes or some shit like that.

Internal server has a website with data logging, use some AI (buzzword) shit to make a prediction for the next 30mins, day, week etc.


| Parts to Buy                                                                                                                                                                                                                                                                                                                                                                                                                  | Power Usage         | Pin Usage                          | Library                                                                                                                                                                        |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- | ---------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [BME280 - Temp/Pressure/Humidity](https://www.aliexpress.com/item/1005004527984343.html?algo_exp_id=6f89cd4b-1b46-403d-911e-79a6ef4f1e0c-1&pdp_ext_f=%7B%22order%22%3A%221323%22%2C%22eval%22%3A%221%22%7D&pdp_npi=4%40dis%21NZD%212.97%212.97%21%21%211.64%211.64%21%402103247017351788748772679ee5a2%2112000029484698902%21sea%21NZ%214286076076%21X&curPageLogUid=C3FBgef9J4kM&utparam-url=scene%3Asearch%7Cquery_from%3A) | 3.3V 2.7microA I2C  | 3.3V, GND, G22, G21                | [CODE](https://randomnerdtutorials.com/esp32-bme280-arduino-ide-pressure-temperature-humidity/)                                                                                |
| [49E Analog Hall Effect Sensor](https://www.aliexpress.com/item/32852539663.html?algo_exp_id=0d0e3744-94af-472a-a574-54344ae81f19-0&pdp_npi=4%40dis%21NZD%212.81%212.81%21%21%211.56%211.56%21%402101c80217352640331386742e2b58%2112000024677720980%21sea%21NZ%214286076076%21X&curPageLogUid=JBjutrFxbVXW&utparam-url=scene%3Asearch%7Cquery_from%3A)                                                                        | 3.3V 3mA Analog     | 3.3V, GND, G39, G34, G35, G32, G33 |                                                                                                                                                                                |
| [RTC DS3231 - Time of Day](https://www.aliexpress.com/item/1005007143596890.html?algo_exp_id=9baa1504-9d4e-4c97-ab1c-fa6cb56d936c-0&pdp_npi=4%40dis%21NZD%212.84%212.84%21%21%2111.47%2111.47%21%402101c59817351715972191437e2a95%2112000039565918038%21sea%21NZ%214286076076%21X&curPageLogUid=nutWQ5Wr9TFH&utparam-url=scene%3Asearch%7Cquery_from%3A)                                                                      | 3.3V I2C            | 3.3V, GND, G22, G21                | [CODE](https://thelinuxforum.com/articles/739-how-to-use-the-ds3231-real-time-clock-rtc-module-with-an-esp32)                                                                  |
| [S12SD - UV Sensor](https://www.aliexpress.com/item/1005006339839716.html?algo_exp_id=4471a1de-6787-462e-b686-bf4ef728aef2-45&pdp_npi=4%40dis%21NZD%214.88%213.18%21%21%2119.72%2112.85%21%402103273e17351802189602064e28d3%2112000036818302186%21sea%21NZ%214286076076%21X&curPageLogUid=EnWgZ0z731Uv&utparam-url=scene%3Asearch%7Cquery_from%3A)                                                                            | 3.3V 1microA Analog | 3.3V, GND, G36                     | [CODE](https://www.circuits-diy.com/interfacing-guva-s12sd-uv-sensor-module-with-arduino/)                                                                                     |
| [SD Card Reader](https://www.aliexpress.com/item/1005006248599786.html?algo_exp_id=c83e1023-6fb9-4f23-b8af-d5cd0c14db03-1&pdp_npi=4%40dis%21NZD%216.78%212.21%21%21%2127.40%218.92%21%402101efeb17351716646058459e4fc3%2112000036462632733%21sea%21NZ%214286076076%21X&curPageLogUid=suc1C0rcELFU&utparam-url=scene%3Asearch%7Cquery_from%3A)                                                                                 | 3.3V 40mA SPI       | 3.3V, GND, G5, G23, G18, G19       | [CODE](https://randomnerdtutorials.com/esp32-microsd-card-arduino/)                                                                                                            |
| [Solar Panel 5V 1.2W](https://www.aliexpress.com/item/1005006259573646.html?algo_exp_id=8f5ac563-4764-4c29-a871-a5c9b19ab5a8-1&pdp_npi=4%40dis%21NZD%214.05%214.05%21%21%2116.38%2116.38%21%4021030ea417352533362702016ec084%2112000037977912091%21sea%21NZ%214286076076%21X&curPageLogUid=ViLKrmyADOE4&utparam-url=scene%3Asearch%7Cquery_from%3A)                                                                           | 5V 240mA input MAX  |                                    | [Solar Setup](https://www.youtube.com/watch?v=37kGva3NW8w)<br>[double panel setup](https://randomnerdtutorials.com/power-esp32-esp8266-solar-panels-battery-level-monitoring/) |
| [ESP32 Expansion Board 38Pin](https://www.aliexpress.com/item/1005007059778300.html?mp=1)                                                                                                                                                                                                                                                                                                                                     | ?? Easy to use      | -                                  | -                                                                                                                                                                              |
|                                                                                                                                                                                                                                                                                                                                                                                                                               |                     |                                    |                                                                                                                                                                                |
|                                                                                                                                                                                                                                                                                                                                                                                                                               |                     |                                    |                                                                                                                                                                                |
Camera dropped as it was out of scope, also too many pins used would not allow easy Wifi. Air Quality sensor dropped due to being 5V, which would introduce the need for a boost converter and a signal shifter.

| Parts already have             | Details                                                                                                                                                                                                                                              |
| ------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 2 x TP4056 USB-C Charge module | R3 resistor switch to                                                                                                                                                                                                                                |
| 1 x 4000mah 3.7V LiPo battery  | Connected to TP4056 to be charged/discharged through.                                                                                                                                                                                                |
| 2 x ESP32 Microcontroller      | [POWER USAGE](https://deepbluembedded.com/esp32-sleep-modes-power-consumption/) Get data values in modem sleep mode (50mA), transmit in active mode (240mA), Deep sleep (10-150microA).<br>[Sleep Code](https://www.youtube.com/watch?v=II5YmGYIFJk) |
